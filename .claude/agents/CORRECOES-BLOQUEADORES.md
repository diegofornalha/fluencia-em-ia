# Corre√ß√µes dos Bloqueadores Identificados - Delegation Coach

Documento com **TODAS as corre√ß√µes obrigat√≥rias** antes do piloto.

---

## üö® BLOQUEADOR 1: Queries Cypher Incorretas (Gap 1)

### **Problema:** Sintaxe `(SELECT count(*) FROM CoachingSession)` n√£o existe em Cypher

### **Corre√ß√£o:**

```cypher
// ‚ùå ERRADO (sintaxe inv√°lida):
MATCH (s:CoachingSession)
WHERE s.cobriu_todas = true
RETURN count(s) * 100.0 / (SELECT count(*) FROM CoachingSession) as percentual

// ‚úÖ CORRETO (sintaxe Cypher v√°lida):
MATCH (s:CoachingSession)
WHERE s.cobriu_problem AND s.cobriu_platform AND s.cobriu_task
WITH count(s) as cobriu_todas
MATCH (total:CoachingSession)
RETURN cobriu_todas * 100.0 / count(total) as percentual
```

### **Queries Corrigidas das 5 M√©tricas:**

```cypher
// M√©trica 1: 90% cobrem 3 subcategorias
MATCH (s:CoachingSession)
WHERE s.cobriu_problem AND s.cobriu_platform AND s.cobriu_task
WITH count(s) as cobriu_todas
MATCH (total:CoachingSession)
RETURN cobriu_todas * 100.0 / count(total) as taxa_cobertura

// M√©trica 2: 80% questionamento profundo (8-15 perguntas)
MATCH (s:CoachingSession)
WHERE s.perguntas_feitas >= 8 AND s.perguntas_feitas <= 15
WITH count(s) as profundas
MATCH (total:CoachingSession)
RETURN profundas * 100.0 / count(total) as taxa_profundidade

// M√©trica 3: 70% revelam gaps
MATCH (s:CoachingSession)
WHERE s.gaps_identificados > 0
WITH count(s) as revelaram_gaps
MATCH (total:CoachingSession)
RETURN revelaram_gaps * 100.0 / count(total) as taxa_gaps

// M√©trica 4: 80% aplicariam sugest√µes
MATCH (s:CoachingSession)
WHERE s.aplicaria_sugestoes = true
WITH count(s) as aplicariam
MATCH (total:CoachingSession)
RETURN aplicariam * 100.0 / count(total) as taxa_aplicacao

// M√©trica 5: 75% dura√ß√£o eficiente (5-10 trocas)
MATCH (s:CoachingSession)
WHERE s.duracao_trocas >= 5 AND s.duracao_trocas <= 10
WITH count(s) as eficientes
MATCH (total:CoachingSession)
RETURN eficientes * 100.0 / count(total) as taxa_eficiencia
```

---

## üö® BLOQUEADOR 2: LGPD - Consentimento para Emails (Gap 2)

### **Problema:** Enviar emails sem consentimento √© ilegal (LGPD Art. 7¬∫)

### **Solu√ß√£o: Modelo de Consentimento**

```cypher
// Adicionar ao modelo Educador
CREATE (e:Educador {
  id: $id_anonimo,                    // ‚Üê Pseud√¥nimo (ex: "EDU_001")
  nome_hash: sha256($nome),           // ‚Üê Hash do nome (n√£o revers√≠vel)
  email_hash: sha256($email),         // ‚Üê Hash do email
  email_original: $email,             // ‚Üê Email original (apenas se consentimento)
  consentimento_email: Boolean,       // ‚Üê OBRIGAT√ìRIO!
  consentimento_data_coleta: Boolean, // ‚Üê OBRIGAT√ìRIO!
  consentimento_pesquisa: Boolean,    // ‚Üê OBRIGAT√ìRIO!
  data_consentimento: DateTime,
  data_criacao: datetime()
})
```

### **Script Python Atualizado:**

```python
def enviar_lembretes():
    """
    Envia lembretes APENAS para educadores com consentimento.
    LGPD-compliant.
    """
    followups = neo4j.query("""
        MATCH (f:FollowupPendente)-[:PARA]->(e:Educador)
        WHERE f.data_aula_estimada < datetime()
          AND f.status = 'pendente'
          AND e.consentimento_email = true  // ‚Üê CHECK OBRIGAT√ìRIO
        RETURN e.email_original, e.id, f.sessao_original
    """)

    for followup in followups:
        # Enviar apenas se consentimento v√°lido
        if followup.email_original:  # Verifica se email n√£o √© null
            send_email(
                to=followup.email_original,
                subject="Lembrete: Reflex√£o p√≥s-aula - Delegation Coach",
                body=f"Ol√°! Notamos que voc√™ participou de uma sess√£o..."
            )

            # Marcar como enviado
            neo4j.query("""
                MATCH (f:FollowupPendente {educador_id: $id})
                SET f.status = 'lembrete_enviado',
                    f.data_envio = datetime()
            """, id=followup.id)
        else:
            # Sem consentimento - apenas logar
            logger.info(f"Educador {followup.id} sem consentimento para email")
```

---

## üö® BLOQUEADOR 3: Privacidade de Dados (Gap 5 NOVO)

### **Problema:** Dados sens√≠veis armazenados sem anonimiza√ß√£o

**Riscos LGPD:**
- Nome completo + gaps = identifica√ß√£o + estigma
- Email + desempenho = dados pessoais sens√≠veis
- Acesso n√£o controlado ao Neo4j = vazamento poss√≠vel

### **Solu√ß√£o: Sistema de Anonimiza√ß√£o**

#### **1. Pseud√¥nimos no Neo4j:**

```cypher
// ‚ùå ANTES (identif

ic√°vel):
(Educador {
  nome: 'Jo√£o Silva',
  email: 'joao@escola.com',
  satisfacao_nps: 6  // ‚Üê Dado sens√≠vel + identific√°vel
})

// ‚úÖ DEPOIS (anonimizado):
(Educador {
  id: 'EDU_001',                      // ‚Üê Pseud√¥nimo
  nome_hash: sha256('Jo√£o Silva'),    // ‚Üê Hash one-way
  email_hash: sha256('joao@escola.com'),
  perfil_inovacao: 'early_adopter',
  contexto: 'formal'
  // Sem satisfacao_nps aqui!
})
-[:PARTICIPOU]->
(CoachingSession {
  id: 'SES_001',
  data: datetime(),
  satisfacao_nps: 6  // ‚Üê OK, ligado ao pseud√¥nimo
})
```

#### **2. Mapeamento Revers√≠vel (apenas para desenvolvedor):**

```cypher
// Tabela de mapeamento SEPARADA (acesso restrito)
CREATE (m:Mapeamento {
  pseudonimo: 'EDU_001',
  nome_real: ENCRYPT('Jo√£o Silva', $chave_master),
  email_real: ENCRYPT('joao@escola.com', $chave_master),
  data_criacao: datetime()
})

// Acesso √† tabela Mapeamento:
// - APENAS desenvolvedor com chave master
// - Log de todos os acessos
// - Criptografia AES-256
```

#### **3. Agrega√ß√£o Anonimizada:**

```cypher
// Relat√≥rios p√∫blicos: SEMPRE agregados, nunca individuais
MATCH (s:CoachingSession)
RETURN
  avg(s.satisfacao_nps) as nps_medio,  // ‚Üê Agregado (OK)
  count(s) as total_sessoes             // ‚Üê Agregado (OK)
// N√ÉO retornar: e.nome, e.email, s.gaps_descricao individual

// Regra: M√≠nimo 5 educadores por agrega√ß√£o (k-anonymity)
MATCH (s:CoachingSession)
WITH count(DISTINCT s.educador_id) as n_educadores
WHERE n_educadores >= 5  // ‚Üê Prote√ß√£o k-anonymity
RETURN avg(s.satisfacao_nps)
```

---

## üìÑ BLOQUEADOR 4: Termo de Consentimento Informado

### **Documento Obrigat√≥rio (LGPD-compliant):**

```markdown
# TERMO DE CONSENTIMENTO LIVRE E ESCLARECIDO
## Projeto: Delegation Coach - Piloto Explorat√≥rio

### 1. APRESENTA√á√ÉO DO PROJETO
Voc√™ est√° sendo convidado(a) a participar do piloto do **Delegation Coach**,
um assistente de IA que ajuda educadores a ensinar planejamento estrat√©gico
com IA (compet√™ncia "Delegation" do Framework de Flu√™ncia em IA).

**Pesquisador Respons√°vel:** [Seu Nome]
**Contato:** [Seu Email]
**Natureza:** Piloto explorat√≥rio (N=5 educadores)

---

### 2. OBJETIVOS DO PILOTO
- Validar se o Delegation Coach ajuda educadores a ensinar planejamento com IA
- Coletar m√©tricas de efic√°cia (cobertura, profundidade, utilidade)
- Identificar gaps e melhorias para vers√£o final

---

### 3. PROCEDIMENTOS
Se voc√™ aceitar participar, voc√™ ir√°:
1. **Sess√£o pr√©-aula (30-45 min):**
   - Conversa com Delegation Coach (IA Claude)
   - Agente far√° perguntas socr√°ticas sobre seu plano de aula
   - Voc√™ receber√° sugest√µes e valida√ß√µes

2. **Implementa√ß√£o (1-2 semanas):**
   - Voc√™ aplica aprendizados com seus alunos (opcional)
   - Sem supervis√£o ou obriga√ß√£o do projeto

3. **Sess√£o p√≥s-aula (20-30 min) - OPCIONAL:**
   - Reflex√£o sobre como foi a aula
   - Feedback sobre utilidade do Delegation Coach

---

### 4. DADOS COLETADOS E USO

#### **Dados Pessoais Coletados:**
- Nome (pseudonimizado como "EDU_XXX" no banco de dados)
- Email (apenas hash, email original s√≥ se consentimento para lembretes)
- Perfil profissional (contexto educacional, disciplina, n√≠vel dos alunos)

#### **Dados de Sess√£o:**
- Transcri√ß√£o de conversas com o Delegation Coach
- M√©tricas: n√∫mero de perguntas, gaps identificados, dura√ß√£o
- Avalia√ß√£o de satisfa√ß√£o (escala 0-10)

#### **Finalidade dos Dados:**
- Valida√ß√£o do Delegation Coach (N=5 piloto)
- An√°lise agregada de efic√°cia (relat√≥rios an√¥nimos)
- Publica√ß√£o de resultados (sem identifica√ß√£o individual)

#### **Armazenamento:**
- Neo4j (banco de grafos) com pseud√¥nimos
- Backup criptografado (AES-256)
- Acesso restrito ao pesquisador respons√°vel

#### **Reten√ß√£o:**
- **Durante o piloto:** Dados individuais pseudonimizados
- **Ap√≥s 6 meses:** Apenas agregados an√¥nimos (k‚â•5)
- **Ap√≥s 1 ano:** Dele√ß√£o completa de dados individuais

---

### 5. RISCOS E BENEF√çCIOS

#### **Riscos M√≠nimos:**
- **Tempo:** 50-75 minutos total (2 sess√µes)
- **Desconforto:** Identifica√ß√£o de gaps no seu ensino (construtivo)
- **Privacidade:** Dados pseudonimizados, risco baixo

#### **Benef√≠cios Diretos:**
- Coaching gratuito para melhorar ensino de Delegation
- Acesso antecipado a ferramenta inovadora
- Contribui√ß√£o para educa√ß√£o em IA

---

### 6. SEUS DIREITOS (LGPD Art. 18)

Voc√™ tem direito a:
- **Acesso:** Ver seus dados a qualquer momento
- **Corre√ß√£o:** Corrigir dados incorretos
- **Exclus√£o:** Deletar todos os seus dados (opt-out total)
- **Portabilidade:** Receber c√≥pia dos seus dados (JSON/CSV)
- **Revoga√ß√£o:** Revogar consentimento a qualquer momento sem penalidade

**Como exercer:** Envie email para [Seu Email] com assunto "LGPD - [Seu Direito]"

---

### 7. CONSENTIMENTOS ESPEC√çFICOS

Marque abaixo o que voc√™ CONSENTE:

- [ ] **OBRIGAT√ìRIO:** Coleta e uso de dados pseudonimizados para o piloto
- [ ] **OPCIONAL:** Receber lembretes por email para sess√£o p√≥s-aula
- [ ] **OPCIONAL:** Uso de dados (an√¥nimos) em publica√ß√µes cient√≠ficas
- [ ] **OPCIONAL:** Ser contatado(a) para futuros pilotos (respeitando opt-out)

---

### 8. DECLARA√á√ÉO DE CONSENTIMENTO

**Eu declaro que:**
- Li e compreendi este termo
- Tive oportunidade de fazer perguntas (respondidas satisfatoriamente)
- Entendo que minha participa√ß√£o √© volunt√°ria
- Posso desistir a qualquer momento sem penalidade
- Entendo os riscos e benef√≠cios
- Aceito participar do piloto

---

**Nome Completo:** _________________________________

**Email:** _________________________________

**Data:** ___/___/2025

**Assinatura Digital (aceite via formul√°rio online):**
- [ ] Li e concordo com os termos acima
- [ ] Confirmo meus consentimentos marcados na Se√ß√£o 7

---

**Pesquisador Respons√°vel:**
Nome: [Seu Nome]
Email: [Seu Email]
Data: ___/___/2025
```

---

## üîß BLOQUEADOR 5: Protocolo de Encerramento no Prompt

### **Problema:** Claude n√£o sabe QUANDO registrar dados no Neo4j

### **Solu√ß√£o: Adicionar ao prompt do delegation-coach.md**

```markdown
## üîö Protocolo de Encerramento de Sess√£o

**Ao final da conversa com o educador, voc√™ DEVE:**

### 1. Resumo da Sess√£o (verbal)
"√ìtimo, [Nome]! Vamos encerrar nossa sess√£o. Deixa eu resumir o que cobrimos:

üéØ **Problem Awareness:** [X perguntas feitas]
- Voc√™ identificou [objetivo/modalidade]

üîß **Platform Awareness:** [X perguntas feitas]
- Discutimos [plataformas/limita√ß√µes]

ü§ù **Task Delegation:** [X perguntas feitas]
- Voc√™ planeja [divis√£o de trabalho]

**Gaps identificados:** [listar gaps espec√≠ficos]
**Sugest√µes oferecidas:** [listar exerc√≠cios/perguntas]"

### 2. Coleta de M√©tricas (perguntar)
"Para eu registrar esta sess√£o, preciso de 2 respostas r√°pidas:

1Ô∏è‚É£ **Satisfa√ß√£o:** Numa escala 0-10, qu√£o √∫til foi esta sess√£o para clarificar como ensinar Delegation?
   [Aguardar resposta: NPS]

2Ô∏è‚É£ **Aplica√ß√£o:** Voc√™ aplicaria pelo menos 1 das sugest√µes que discutimos?
   [Aguardar resposta: Sim/N√£o/Talvez]"

### 3. Registro no Neo4j (autom√°tico via MCP)
```cypher
// Voc√™ DEVE executar via mcp__neo4j-memory__create_entities:
CREATE (s:CoachingSession {
  id: generate_uuid(),
  educador_id: $pseudonimo,  // Ex: "EDU_001"
  data: datetime(),
  tipo: 'pre-aula',

  // M√©tricas objetivas (voc√™ conta):
  perguntas_feitas: $total_perguntas,
  duracao_trocas: $total_trocas,
  cobriu_problem: true/false,
  cobriu_platform: true/false,
  cobriu_task: true/false,
  gaps_identificados: $numero_gaps,

  // M√©tricas subjetivas (educador respondeu):
  satisfacao_nps: $resposta_1,
  aplicaria_sugestoes: $resposta_2,

  // Contexto:
  contexto_educador: $contexto,
  disciplina: $disciplina
})

// Criar n√≥s de Gaps identificados:
MATCH (s:CoachingSession {id: $sessao_id})
FOREACH (gap in $lista_gaps |
  CREATE (g:Gap {
    descricao: gap.descricao,
    subcategoria: gap.subcategoria  // 'problem', 'platform', 'task'
  })
  CREATE (s)-[:IDENTIFICOU]->(g)
)

// Criar followup pendente:
CREATE (f:FollowupPendente {
  educador_id: $pseudonimo,
  sessao_original_id: $sessao_id,
  data_aula_estimada: datetime() + duration({days: 7}),
  status: 'pendente'
})
```

### 4. Confirma√ß√£o ao Educador
"Pronto! Registrei nossa sess√£o. üìä

**Pr√≥ximos passos:**
1. Aplique os aprendizados com seus alunos
2. Em ~1 semana, te envio lembrete para reflex√£o p√≥s-aula (se consentiu)
3. Nessa reflex√£o, discutimos o que funcionou/n√£o funcionou

Qualquer d√∫vida, pode me procurar novamente. Boa aula! üéì"
```

---

## ‚úÖ CHECKLIST DE IMPLEMENTA√á√ÉO

Antes de recrutar educadores, voc√™ DEVE:

- [ ] **1h:** Atualizar README com queries Cypher corrigidas
- [ ] **2h:** Adicionar modelo de anonimiza√ß√£o (pseud√¥nimos) ao README
- [ ] **1h:** Adicionar protocolo de encerramento ao delegation-coach.md
- [ ] **2h:** Criar formul√°rio online com termo de consentimento
- [ ] **1h:** Configurar controle de acesso ao Neo4j (usu√°rio/senha)
- [ ] **1h:** Testar fluxo completo (sess√£o ‚Üí registro Neo4j ‚Üí query m√©tricas)
- [ ] **2h:** Criar script Python de lembretes com check de consentimento

**Total:** ~10h de implementa√ß√£o

---

## üéØ STATUS AP√ìS CORRE√á√ïES

**Antes:**
- ‚ö†Ô∏è 95% pronto
- üö® 5 bloqueadores cr√≠ticos

**Depois (com este documento):**
- ‚úÖ 100% especificado
- ‚úÖ 0 bloqueadores
- ‚úÖ **APROVADO PARA PILOTO**

---

¬© 2025 - Corre√ß√µes LGPD/Privacidade para Delegation Coach
**Licen√ßa:** [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/)
